\documentclass[12pt]{article}
\usepackage[margin=1in]{geometry}
\usepackage{enumitem}
\usepackage{booktabs}

\title{CSC111 Project 1 Report:\\The Ritual Mystery Adventure}
\author{Student Name}
\date{\today}

\begin{document}

\maketitle
\tableofcontents
\newpage

% ============================================================
\section{How to Run the Game}
% ============================================================

Run the following command from the project directory:

\begin{verbatim}
python adventure.py
\end{verbatim}

\textbf{Requirements:} Python 3.13.5. No external libraries are required.
The game reads all data from \texttt{game\_data.json} in the same directory.

% ============================================================
\section{Game Map}
% ============================================================

The game takes place across 13 locations on the UofT St.\ George campus
(IDs 0--12).

\subsection{Map Grid}

Each cell shows a location ID; \texttt{-1} means no location exists there.

\begin{verbatim}
-1  -1  11  -1  -1
-1   6  10  -1  -1
 3   5   4   7  -1
 9  -1   2  -1   8
-1  -1   1  -1  -1
-1  -1   0  -1  12
\end{verbatim}

\textbf{Starting location:} 0 (Your Dorm Room -- bottom-centre cell).

\subsection{Location Reference}

\begin{itemize}[leftmargin=2.5cm]
\item[\textbf{[0]}]  Dorm Room (Chestnut) -- START and win destination
\item[\textbf{[1]}]  Chestnut Hallway -- coffee is here
\item[\textbf{[2]}]  Outside Chestnut (campus path)
\item[\textbf{[3]}]  Sidney Smith Hall
\item[\textbf{[4]}]  St.\ George Street (North)
\item[\textbf{[5]}]  Robarts Library -- Ground Floor
\item[\textbf{[6]}]  Robarts Library -- Upper Stacks (USB Drive here)
\item[\textbf{[7]}]  Bahen Center -- Ground Floor (keypad puzzle)
\item[\textbf{[8]}]  BA3200 Lecture Hall (Laptop Charger here)
\item[\textbf{[9]}]  Tim Hortons / Sidney Smith (Lucky Mug here)
\item[\textbf{[10]}] King's College Circle -- RITUAL SITE
\item[\textbf{[11]}] Gerstein Science Library
\item[\textbf{[12]}] Server Room (unlocked by keypad)
\end{itemize}

% ============================================================
\section{Game Solution}
% ============================================================

The following commands win the game.
18 of the 27 total commands are movement commands; the move limit is
28 (or 33 after drinking coffee), giving a buffer of at least 10 moves.

\begin{verbatim}
go east             -- 0 -> 1  Chestnut hallway
take coffee         -- FREE (+5 moves, limit becomes 33)
go north            -- 1 -> 2
go north            -- 2 -> 10  King's College Circle
go west             -- 10 -> 7  Bahen Center
go up               -- 7 -> 8  BA3200
take laptop charger -- FREE
go down             -- 8 -> 7
go north            -- 7 -> 3  Sidney Smith
go north            -- 3 -> 5  Robarts ground
go up               -- 5 -> 6  Robarts stacks
take usb drive      -- FREE
go down             -- 6 -> 5
go south            -- 5 -> 3
go west             -- 3 -> 9  Tim Hortons
take lucky mug      -- FREE
go east             -- 9 -> 3
go south            -- 3 -> 7  Bahen
go east             -- 7 -> 10  King's College Circle
drop usb drive      -- ritual step 1
drop laptop charger -- ritual step 2
drop lucky mug      -- ritual step 3 (RITUAL FIRES, backup_usb spawns)
take backup_usb     -- FREE
go south            -- 10 -> 2
go south            -- 2 -> 1
go west             -- 1 -> 0  DORM
drop backup_usb     -- WIN
\end{verbatim}

% ============================================================
\section{Lose Conditions}
% ============================================================

\subsection{Description}

The player loses if the total number of \emph{movement} commands
(\texttt{go north/south/east/west/up/down}) reaches the move limit before
the win condition is met.

\begin{itemize}
\item \textbf{Base move limit:} \texttt{BASE\_MAX\_MOVES = 28} (constant in \texttt{adventure.py})
\item \textbf{With coffee bonus:} 33 moves (\texttt{COFFEE\_BONUS\_MOVES = 5})
\item All other commands -- \texttt{look}, \texttt{inventory}, \texttt{score},
      \texttt{log}, \texttt{take}, \texttt{drop}, \texttt{examine},
      \texttt{enter code}, \texttt{quit} -- are \textbf{free} (do not use a move).
\end{itemize}

\subsection{Code Involved}

\begin{itemize}
\item \textbf{File:} \texttt{game\_entities.py} --
      \texttt{Player.moves\_made} tracks move count;
      \texttt{Player.increment\_moves()} increments it.
\item \textbf{File:} \texttt{adventure.py} --
      \texttt{AdventureGame.do\_go()} is the \emph{only} method that calls
      \texttt{player.increment\_moves()}.
\item \textbf{File:} \texttt{adventure.py} --
      \texttt{AdventureGame.check\_lose()} returns
      \texttt{player.moves\_made >= self.max\_moves}.
      Checked in the main loop after every action.
\end{itemize}

\subsection{Lose Demo Commands}

The commands below exhaust all 28 moves without winning:

\begin{verbatim}
go east    go west    go east    go west    go east    go west
go east    go west    go east    go west    go east    go west
go east    go west    go east    go west    go east    go west
go east    go west    go east    go west    go east    go west
go east    go west    go east    go west    -- 28 moves, GAME OVER
\end{verbatim}

% ============================================================
\section{Inventory}
% ============================================================

\subsection{Item Locations}

\begin{table}[h]
\centering
\begin{tabular}{lcccc}
\toprule
\textbf{Item} & \textbf{Start} & \textbf{Target} & \textbf{Pickup pts} & \textbf{Deposit pts} \\
\midrule
USB Drive       & 6  & 0 (dorm) & 5  & 30 \\
Laptop Charger  & 8  & 0 (dorm) & 5  & 30 \\
Lucky Mug       & 9  & 0 (dorm) & 5  & 30 \\
coffee          & 1  & --       & 0  & -- \\
clue\_paper     & 12 & --       & 15 & -- \\
backup\_usb     & spawned & 0 (dorm) & 50 & 100 \\
\bottomrule
\end{tabular}
\end{table}

\textbf{Note:} The three required items (USB Drive, Laptop Charger, Lucky Mug)
are first dropped at King's College Circle (10) to trigger the ritual,
after which they dissolve and the \texttt{backup\_usb} spawns.
The \texttt{backup\_usb} is then carried home to earn the deposit points.

\subsection{Example Inventory Demo}

The following commands walk to BA3200, pick up the Laptop Charger, and display inventory:

\begin{verbatim}
go east             -- 0 -> 1
go north            -- 1 -> 2
go north            -- 2 -> 10
go west             -- 10 -> 7  Bahen
go up               -- 7 -> 8   BA3200
take laptop charger -- pick up item (+5 pts)
inventory           -- shows: Laptop Charger
\end{verbatim}

\subsection{Code Involved}

\begin{itemize}
\item \textbf{File:} \texttt{adventure.py}, method \texttt{AdventureGame.do\_take()} --
      removes item from location, adds to \texttt{player.inventory}, awards pickup points.
\item \textbf{File:} \texttt{adventure.py}, method \texttt{AdventureGame.do\_drop()} --
      removes item from inventory, places at location, awards target points if applicable.
\item \textbf{File:} \texttt{adventure.py}, method \texttt{AdventureGame.do\_inventory()} --
      prints all items currently in \texttt{player.inventory}.
\item \textbf{File:} \texttt{game\_entities.py}, class \texttt{Player} --
      \texttt{inventory}, \texttt{add\_item()}, \texttt{remove\_item()}.
\end{itemize}

% ============================================================
\section{Score}
% ============================================================

\subsection{Scoring Algorithm}

\begin{itemize}
\item Picking up USB Drive / Laptop Charger / Lucky Mug: \textbf{+5 pts each}
\item Picking up clue\_paper (server room): \textbf{+15 pts}
\item Picking up backup\_usb after ritual: \textbf{+50 pts}
\item Depositing backup\_usb at dorm: \textbf{+100 pts}
\item Ritual completion bonus: \textbf{+50 pts}
\item Solving the keypad puzzle: \textbf{+20 pts}
\item \textbf{Maximum possible score: 230 pts}
\end{itemize}

\subsection{First Score Increase}

The earliest score increase occurs at Location 6 (Robarts Upper Stacks)
when the player picks up the USB Drive for \textbf{+5 points}.

Commands to reach the first score increase:

\begin{verbatim}
go east             -- 0 -> 1
go north            -- 1 -> 2
go north            -- 2 -> 10
go west             -- 10 -> 7 (Bahen)
go north            -- 7 -> 3  (Sidney Smith)
go north            -- 3 -> 5  (Robarts ground)
go up               -- 5 -> 6  (Robarts stacks)
take usb drive      -- SCORE +5
score               -- shows: 5 / 230 (2.2%)
\end{verbatim}

\subsection{Code Involved}

\begin{itemize}
\item \textbf{File:} \texttt{game\_entities.py}, method \texttt{Player.add\_score()} --
      adds points to \texttt{self.score}.
\item \textbf{File:} \texttt{adventure.py}, method \texttt{AdventureGame.do\_take()} --
      calls \texttt{player.add\_score(item.pickup\_points)}.
\item \textbf{File:} \texttt{adventure.py}, method \texttt{AdventureGame.do\_drop()} --
      calls \texttt{player.add\_score(item.target\_points)} when at correct location.
\item \textbf{File:} \texttt{adventure.py}, method \texttt{AdventureGame.do\_score()} --
      prints \texttt{score / MAX\_SCORE (percentage)}.
\end{itemize}

% ============================================================
\section{Enhancements}
% ============================================================

\subsection{Enhancement 1: Summoning Ritual (HIGH Complexity)}

\textbf{Complexity: HIGH}

\textbf{Description:}
The game's central puzzle is a horror-movie-inspired summoning ritual.
The player must collect three specific items (the ``Blue Guardian'',
``Silver Conductor'', and ``Golden Vessel''), then travel to
King's College Circle (location 10) and drop all three items there.
When the third item is dropped, the ritual fires automatically:
the items glow, orbit each other in a triangle, then dissolve into
a \emph{new} USB drive (\texttt{backup\_usb}) which materialises in their place,
labelled ``FIXED VERSION -- SUBMIT THIS ONE''.
The player then takes the backup drive home and drops it at the dorm to win.

\textbf{Steps to solve:}
\begin{enumerate}
\item Collect USB Drive (loc 6), Laptop Charger (loc 8), Lucky Mug (loc 9).
\item Travel to King's College Circle (loc 10).
\item \texttt{drop usb drive}, \texttt{drop laptop charger}, \texttt{drop lucky mug}.
\item Ritual fires; \texttt{backup\_usb} spawns.
\item \texttt{take backup\_usb}; travel home; \texttt{drop backup\_usb}.
\end{enumerate}

\textbf{Why HIGH complexity:}
\begin{itemize}
\item Requires visiting multiple locations across the campus.
\item Three-item validation inside \texttt{\_check\_ritual()}.
\item Dynamic item creation: \texttt{backup\_usb} starts with
      \texttt{start\_position = -1} and is spawned at runtime.
\item Original items are programmatically removed from the world.
\item State flag \texttt{ritual\_complete} prevents double-triggering.
\item Integrated with the win condition: player can only win after ritual.
\end{itemize}

\textbf{Code:} \texttt{adventure.py} -- \texttt{AdventureGame.\_check\_ritual()},
\texttt{AdventureGame.do\_drop()}, attribute \texttt{ritual\_complete}.

\textbf{Enhancement demo commands:}
\begin{verbatim}
go east; go north; go north             -- reach King's College Circle
go west; go up; take laptop charger     -- Silver Conductor
go down; go north; go north; go up      -- to Robarts stacks
take usb drive                          -- Blue Guardian
go down; go south; go west              -- to Tim Hortons
take lucky mug                          -- Golden Vessel
go east; go south; go east              -- back to Circle
drop usb drive
drop laptop charger
drop lucky mug                          -- RITUAL FIRES
\end{verbatim}

\subsection{Enhancement 2: Dynamic Stage-Based Messages (HIGH Complexity)}

\textbf{Complexity: HIGH}

\textbf{Description:}
The game tracks a narrative stage (\texttt{start}, \texttt{exploring},
\texttt{gathering}, \texttt{ready\_ritual}, \texttt{ritual\_done}) and
displays different contextual messages at key locations depending on
the player's progress.

\begin{itemize}
\item \textbf{King's College Circle} shows:
  \begin{itemize}
  \item \emph{Start}: ``The founding circle feels alive. Something is waiting.''
  \item \emph{Gathering}: ``The circle pulses. You have X/3 sacred items.''
  \item \emph{Ready ritual}: Full ritual instructions printed automatically.
  \item \emph{After ritual}: ``The circle is quiet now.''
  \end{itemize}
\item \textbf{Gerstein Library} shows the partner's changing sign.
\item \textbf{Server room} prints the story-revelation document on first visit.
\item \textbf{Each item pickup} prints progress (``Still need: ...'') and
      announces all-three-collected when applicable.
\end{itemize}

\textbf{Why HIGH complexity:}
\begin{itemize}
\item Six-stage finite state machine in \texttt{game\_stage}.
\item Stage advances automatically as items are collected and rituals complete.
\item Three separate location-specific message blocks, each with stage branches.
\item Cross-cutting with item collection, movement, and ritual systems.
\end{itemize}

\textbf{Code:} \texttt{adventure.py} -- \texttt{AdventureGame.\_check\_stage\_messages()},
\texttt{AdventureGame.do\_take()}, attributes \texttt{game\_stage} and \texttt{items\_collected}.

\subsection{Enhancement 3: Keypad Puzzle (MEDIUM Complexity)}

\textbf{Complexity: MEDIUM}

\textbf{Description:}
A 4-digit keypad at Bahen Center (location 7) guards the server room
(location 12). The code is \textbf{1827}, the actual founding year of the
University of Toronto. The in-game clue is:
\emph{``When UofT was born, so was the code.''} Entering the correct code
unlocks a \texttt{go south} exit to the server room, awards 20 points,
and the server room reveals a document explaining the full story.

\textbf{Steps to solve:}
\begin{enumerate}
\item Travel to Bahen Center (location 7).
\item Type \texttt{enter code} at the prompt.
\item Enter \texttt{1827} when the keypad prompt appears.
\item Travel \texttt{go south} into the server room.
\item \texttt{take clue\_paper} (+15 pts) to read the full story.
\end{enumerate}

\textbf{Why MEDIUM complexity:}
\begin{itemize}
\item Requires in-game knowledge search (founding year clue).
\item Player input validated inside \texttt{do\_enter\_code()}.
\item Dynamically modifies \texttt{available\_commands} to add the south exit.
\item State flag \texttt{server\_room\_unlocked} prevents re-triggering.
\item Unlocking is optional but rewards points and story context.
\end{itemize}

\textbf{Code:} \texttt{adventure.py} -- \texttt{AdventureGame.do\_enter\_code()},
attribute \texttt{server\_room\_unlocked}. Code stored in \texttt{game\_data.json}
under key \texttt{puzzle\_code}.

\textbf{Enhancement demo commands:}
\begin{verbatim}
go east; go north; go north             -- reach King's College Circle
go west                                 -- Bahen Center (loc 7)
enter code                              -- type 1827 at the prompt
go south                                -- enter server room (loc 12)
take clue_paper                         -- read the full story
\end{verbatim}

\end{document}
